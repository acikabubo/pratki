{% extends "base.html" %}

{% block content %}
{% if current_user.is_authenticated %}
<div class="profile-page">
<p class="profile">
    Logged as: <strong>{{ current_user.username }}</strong>
    &nbsp;&nbsp;
    <a href="{{ url_for('logout') }}">Logout</a><br><br>
    <a href="{{ url_for('info') }}">Go back</a>
</p>
{% endif %}

        <div class="form">
            <form class="change-password-form" action="/change_password" method="post" novalidate>
                {{ cp_form.hidden_tag() }}
                {{ cp_form.password(size=32) }}
                {{ cp_form.password2(size=32) }}
                {{ cp_form.submit(class_="btn-submit") }}
            </form>
            <div class="form-row">
                {% for item in data.linked %}
                    <a class="btn btn-block loginBtn loginBtn-{{ item }}"
                        href="{{ url_for('unlink', provider=item) }}">
                            Unlink {{ item|title }}
                    </a>
                {% endfor %}
                {% for item in data.unlinked %}
                    <a class="btn btn-block loginBtn loginBtn-{{ item }}"
                        href="{{ url_for('oauth_authorize', provider=item, link=1) }}">
                            Login with {{ item|title }}
                    </a>
                {% endfor %}
            </div>
        </div>
    </div>
    
{% endblock %}